(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7898ad70"],{3636:function(t,e,s){"use strict";var a=s("5226"),r=s.n(a);r.a},"45fc":function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").some,n=s("a640"),i=s("ae40"),c=n("some"),o=i("some");a({target:"Array",proto:!0,forced:!c||!o},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5226:function(t,e,s){},"52a2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-inline-flex align-items-center cursor-pointer"},[s("div",[s("div",{staticClass:"userPic"},[t._v(t._s(t.user.first_name[0]))])]),s("div",[s("div",{staticClass:"text-blue"},[t._v(" "+t._s(t.user.last_name+" "+t.user.first_name+" "+t.user.patronymic_name)+" ")]),s("div",{staticClass:"small_grey-text"},[t._v(t._s(t.user.department.name))])])])},r=[],n={name:"UserPreview",props:{user:{type:Object||Function,default:function(){return{department:"Создания регламентов",email:"ivanov@example.com",first_name:"Иванов",id:1,is_deleted:!1,last_name:"Иван",patronymic_name:"Иванович",phone_number:"+7 932 323 2132"}}}},data:function(){return{}},created:function(){},computed:{},methods:{}},i=n,c=s("2877"),o=Object(c["a"])(i,a,r,!1,null,null,null);e["a"]=o.exports},"99af":function(t,e,s){"use strict";var a=s("23e7"),r=s("d039"),n=s("e8b5"),i=s("861d"),c=s("7b0b"),o=s("50c4"),l=s("8418"),u=s("65f0"),m=s("1dde"),d=s("b622"),v=s("2d00"),f=d("isConcatSpreadable"),_=9007199254740991,p="Maximum allowed index exceeded",g=v>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=m("concat"),h=function(t){if(!i(t))return!1;var e=t[f];return void 0!==e?!!e:n(t)},C=!g||!b;a({target:"Array",proto:!0,forced:C},{concat:function(t){var e,s,a,r,n,i=c(this),m=u(i,0),d=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?i:arguments[e],h(n)){if(r=o(n.length),d+r>_)throw TypeError(p);for(s=0;s<r;s++,d++)s in n&&l(m,d,n[s])}else{if(d>=_)throw TypeError(p);l(m,d++,n)}return m.length=d,m}})},b859:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"pt-4"},[s("div",{staticClass:"large-title mt-5"},[t._v(t._s(t.reglament.name))]),t.currentUser.department.is_regulator?s("button",{staticClass:"float-right custom-edit",on:{click:function(e){return t.$router.push({name:"reglamentReview",params:{id:t.taskId}})}}},[t._v("Проверить")]):s("button",{staticClass:"float-right custom-edit",on:{click:function(e){return t.$router.push("/reglament/"+t.taskId)}}},[t._v("Редактировать")]),s("div",{staticClass:"small_grey-text mt-2 mb-5"},[t._v("Последние измненения: "+t._s(t.moment(t.reglament.updated_at).format("DD.MM.YYYY HH:mm")))]),s("button",{on:{click:t.openPDF}},[t._v("Скачать")]),s("div",{staticClass:"md-title mt-5"},[t._v("Отвественный сотрудник:")]),s("UserPreview",{attrs:{user:t.reglament.created_by}})],1),s("div",{staticClass:"md-text mt-5"},[s("b-container",{staticClass:"pt-2"},[s("div",{staticClass:"md-title mb-3"},[t._v("Этапы согласований:")])]),s("b-container",t._l(t.reglament.departments_users,(function(e){return s("b-row",{key:e.user.department.id,staticClass:"task-item w-100",attrs:{"align-v":"center"}},[s("b-col",{staticClass:"justify-content-between d-flex align-items-center",attrs:{cols:"8"}},[s("div",{staticClass:" d-flex align-items-center"},[s("div",{staticClass:"dot-wrapper mr-3 pl-1 pt-1"},[s("div",{staticClass:"large-dot"})]),s("div",{staticClass:"text-blue ml-3"},[t._v(t._s(e.status||"Ожидание")+": "+t._s(e.user.department.name))])]),s("div",{staticClass:"mt-2 cursor-pointer",class:{"issue-alert":t.hasIssue(e)},on:{click:function(s){return t.gotoIssue(e)}}},[s("b-icon",{staticClass:"float-right icon-lg",attrs:{icon:"chat-left-text"}})],1)]),s("b-col",{staticClass:"text-right small_grey-text",attrs:{cols:"2"}},[t._v(" "+t._s(e.user.last_name?e.user.last_name:"")+" "+t._s(e.user.first_name?e.user.first_name[0]+". ":"")+" "+t._s(e.user.patronymic_name?e.user.patronymic_name[0]+".":"")+" ")]),s("b-col",{staticClass:"text-right small_grey-text",attrs:{cols:"2"}},[t._v(" 01.10.2020 ")])],1)})),1)],1),s("div",{staticClass:"md-text mt-5 pt-5"},[s("b-container",[s("div",{staticClass:"md-title mb-2 pt-4"},[t._v("Изменения:")])]),s("b-container",[s("b-row",{staticClass:"w-100 task-item",attrs:{"align-v":"center"}},[s("b-col",{staticClass:"justify-content-between d-flex align-items-center",attrs:{cols:"8"}},[s("div",{staticClass:" d-flex align-items-center"},[s("div",{staticClass:"dot-wrapper mr-3 pl-1 pt-1"},[s("div",{staticClass:"large-dot"})]),s("div",{staticClass:"text-blue ml-3"},[t._v("Создание текста регламента")])])]),s("b-col",{staticClass:"text-right small_grey-text",attrs:{cols:"2"}},[t._v(" Иванов И.И ")]),s("b-col",{staticClass:"text-right small_grey-text",attrs:{cols:"2"}},[t._v(" 01.10.2020 ")])],1)],1)],1)],1)},r=[],n=(s("99af"),s("45fc"),s("5530")),i=s("bc34"),c=s("2f62"),o=s("52a2"),l=s("c1df"),u=s.n(l),m={name:"Task",components:{UserPreview:o["a"]},props:{taskId:{required:!0,type:String}},data:function(){return{reglament:{},revisions:[],moment:u.a}},created:function(){this.getReglament(),this.getRevisions()},computed:Object(n["a"])({},Object(c["mapGetters"])(["currentUser"])),methods:{hasIssue:function(t){var e=t.user;return this.revisions.some((function(t){return!t.is_marked_solved&&t.created_by.username===e.username}))},gotoIssue:function(t){this.hasIssue(t)&&this.$router.push("/revisions/".concat(this.reglament.id,"/").concat(t.user.id))},getReglament:function(){var t=this;i["a"].getReglament(this.taskId).then((function(e){var s=e.data;t.reglament=s[0]}))},getRevisions:function(){var t=this;i["a"].getRevisions(this.taskId).then((function(e){var s=e.data;t.revisions=s.results}))},openPDF:function(){window.open("/api/pdf?id=".concat(this.taskId))}}},d=m,v=(s("3636"),s("2877")),f=Object(v["a"])(d,a,r,!1,null,"2812ec09",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-7898ad70.f6f22d78.js.map