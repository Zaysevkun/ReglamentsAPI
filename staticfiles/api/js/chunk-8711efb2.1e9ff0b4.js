(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8711efb2"],{2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),s=n("1d80"),o=n("ab13");i({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,n){var i=n("861d"),a=n("c6b6"),s=n("b622"),o=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},"45fc":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").some,s=n("a640"),o=n("ae40"),c=s("some"),r=o("some");i({target:"Array",proto:!0,forced:!c||!r},{some:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"48fe":function(t,e,n){},"566b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pb-4"},[n("b-container",{staticClass:"pt-2"},[n("div",{staticClass:"mb-5 large-title mt-5"},[t._v("Согласование регламента")]),n("div",{staticClass:"mb-5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.reglament.name,expression:"reglament.name"}],staticClass:"serchInput w-100",attrs:{type:"text",readonly:"",placeholder:"Введите название регламента"},domProps:{value:t.reglament.name},on:{input:function(e){e.target.composing||t.$set(t.reglament,"name",e.target.value)}}})]),n("div",{staticClass:"d-flex "},[n("div",{staticClass:"h600 w-100"},[n("div",{staticClass:"w-100 ql-editor custom",domProps:{innerHTML:t._s(t.content)}})]),n("div",{staticClass:"items"},[n("div",{staticClass:"md-title ml-3"},[t._v("Разделы")]),n("div",{staticClass:"mt-4 ml-2"},[n("div",{staticClass:"cursor-pointer it",class:{active:0===t.tab},on:{click:function(e){t.tab=0}}},[n("div",{staticClass:"d-inline-block ml-2 pl-1"},[t._v(" Заголовок документа")])]),n("div",{staticClass:"cursor-pointer it",class:{active:1===t.tab},on:{click:function(e){t.tab=1}}},[n("div",{staticClass:"d-inline-block"},[t._v("1.")]),n("div",{staticClass:"d-inline-block"},[t._v(" Cтандарт предоставления услуги")])]),n("div",{staticClass:"cursor-pointer it",class:{active:2===t.tab},on:{click:function(e){t.tab=2}}},[n("div",{staticClass:"d-inline-block"},[t._v("2.")]),n("div",{staticClass:"d-inline-block"},[t._v(" Формы контроля за исполнением")])]),n("div",{staticClass:"cursor-pointer it",class:{active:3===t.tab},on:{click:function(e){t.tab=3}}},[n("div",{staticClass:"d-inline-block"},[t._v("3.")]),n("div",{staticClass:"d-inline-block"},[t._v(" Состав, последовательность действий")])]),n("div",{staticClass:"cursor-pointer it",class:{active:4===t.tab},on:{click:function(e){t.tab=4}}},[n("div",{staticClass:"d-inline-block"},[t._v("4.")]),n("div",{staticClass:"d-inline-block"},[t._v(" Формы контроля за исполнением")])]),n("div",{staticClass:"cursor-pointer it",class:{active:5===t.tab},on:{click:function(e){t.tab=5}}},[n("div",{staticClass:"d-inline-block"},[t._v("5.")]),n("div",{staticClass:"d-inline-block"},[t._v(" Досудебный порядок обжалования решений ")])])])])])]),n("b-container",{staticClass:"text-center"},[n("button",{on:{click:t.revision}},[t._v("Отправить на доработку")]),n("button",{staticClass:"ml-4",on:{click:t.approve}},[t._v("Согласовать")])]),t.showPopover?n("div",t._l(t.comments,(function(e){return n("div",{key:e.secret_id},[n("b-popover",{attrs:{target:e.secret_id+"-comment",triggers:"click",placement:"top"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Комментарий")]},proxy:!0}],null,!0)},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment.comment"}],staticClass:"txtar",domProps:{value:e.comment},on:{input:function(n){n.target.composing||t.$set(e,"comment",n.target.value)}}})])],1)})),0):t._e()],1)},a=[],s=(n("99af"),n("caad"),n("45fc"),n("ac1f"),n("2532"),n("5319"),n("5530")),o=n("2f62"),c=n("bc34"),r=(n("a753"),n("8096"),n("14e1"),{name:"ReglamentReview",components:{},props:{id:{required:!1,type:String}},computed:Object(s["a"])({},Object(o["mapGetters"])(["currentUser"])),data:function(){return{showPopover:!0,counter0:0,counter1:0,counter2:0,counter3:0,counter4:0,counter5:0,popover:!1,text:"",content:"",tab:0,reglament:{name:"",parts:{label:{label:"",comments:[]},text1:{label:"",text:""},text2:{label:"",text:""},text3:{label:"",text:""},text4:{label:"",text:""},text5:{label:"",text:""}}},holdStart:null,comments:[]}},created:function(){this.id&&this.getReglament()},mounted:function(){var t=this,e=document.querySelector(".ql-editor");e.addEventListener("mousedown",(function(){t.holdStart=Date.now()})),e.addEventListener("mouseup",(function(){var e=Date.now()-t.holdStart;t.holdStart=null,e>149&&t.getChoosenText()}))},watch:{tab:function(t,e){var n=this;this.setContent(t,e),this.showPopover=!1,this.$nextTick((function(){n.showPopover=!0}))}},methods:{validate:function(t){var e=this,n=this.comments.some((function(n){return n.tab===e.tab&&n.html_selection.includes(t)}));return n},getChoosenText:function(){var t=this,e=window.getSelection().focusNode.data||window.getSelection().anchorNode.data;if(!this.validate(e)){var n='<span class="test" id="'.concat(this["counter"+this.tab],'-comment" style="color: rgb(231, 0, 0);">').concat(e,"</span>");this.content=this.content.replace(e,n),setTimeout((function(){t.comments.push({html_selection:n,secret_id:t["counter"+t.tab]++,comment:"",tab:t.tab,default_text:e})}),200)}},saveInfo:function(t){this.info[t]=this.$refs.vueditor.getContent()},setContent:function(t,e){0===e?this.reglament.parts.label.text=this.content:this.reglament.parts["text".concat(e)].text=this.content,this.content=0===this.tab?this.reglament.parts.label.text:this.reglament.parts["text".concat(t)].text},getReglament:function(){var t=this;c["a"].getReglament(this.id).then((function(e){var n=e.data;t.reglament=n[0],t.content=0===t.tab?t.reglament.parts.label.text:t.reglament.parts["text".concat(t.tab)].text}))},saveReglaments:function(){0===this.tab?this.reglament.parts.label.text=this.content:this.reglament.parts["text".concat(this.tab)].text=this.content,this.id?c["a"].changeReglament(this.reglament):c["a"].saveReglament(this.reglament)},revision:function(){var t=this;c["a"].revisions(this.comments,this.id).then((function(){t.$router.go(-1)}))},approve:function(){var t=this;c["a"].approve(this.id,this.currentUser.id).then((function(){t.$router.go(-1)}))}}}),l=r,u=(n("9b7c"),n("2877")),d=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=d.exports},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"9b7c":function(t,e,n){"use strict";var i=n("48fe"),a=n.n(i);a.a},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,s=n("44d2"),o=n("ae40"),c=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!c},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);
//# sourceMappingURL=chunk-8711efb2.1e9ff0b4.js.map