{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./src/pages/Revisions.vue?47f3","webpack:///./src/pages/Revisions.vue?ea80","webpack:///src/pages/Revisions.vue","webpack:///./src/pages/Revisions.vue?e918","webpack:///./src/pages/Revisions.vue"],"names":["$","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","revisions","created_by","department","name","_l","revision","key","id","attrs","directives","rawName","value","expression","class","is_marked_solved","taskId","revisorId","last_name","first_name","patronymic_name","moment","created_at","format","report","staticRenderFns","components","props","required","type","String","data","created","getReglament","getRevisionsByUser","computed","methods","hasIssue","console","log","user","username","gotoIssue","mainService","component"],"mappings":"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","file":"js/chunk-779a4409.03e7568a.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Revisions.vue?vue&type=style&index=0&id=78d1a9c1&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Revisions.vue?vue&type=style&index=0&id=78d1a9c1&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-container',{staticClass:\"pt-4\"},[_c('div',{staticClass:\"large-title mt-5\"},[_vm._v(\"Комментарии от \"+_vm._s(_vm.revisions.length ? _vm.revisions[0].created_by.department.name : ''))])]),_c('div',{staticClass:\"md-text mt-5 pt-5\"},[_c('b-container',_vm._l((_vm.revisions),function(revision){return _c('b-row',{key:revision.id,staticClass:\"w-100 task-item\",attrs:{\"align-v\":\"center\"}},[_c('b-col',{staticClass:\"justify-content-between d-flex align-items-center\",attrs:{\"cols\":\"5\"}},[_c('div',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle\",value:((\"collapse-\" + (revision.id))),expression:\"`collapse-${revision.id}`\"}],staticClass:\"clearitem d-flex align-items-center\"},[_c('div',{staticClass:\"dot-wrapper mr-3 pl-1 pt-1\"},[_c('div',{staticClass:\"large-dot\",class:{'bg-grey': revision.is_marked_solved}})]),_c('div',{staticClass:\"text-blue ml-3\",class:{'text-grey': revision.is_marked_solved}},[_vm._v(\"Комментарий от \"+_vm._s(revision.created_by.department.name))])]),_c('b-icon',{staticClass:\"float-right text-blue\",attrs:{\"icon\":\"chevron-down\"}})],1),_c('b-col',{staticClass:\"text-right small_grey-text\",attrs:{\"cols\":\"2\"}},[(!revision.is_marked_solved)?_c('router-link',{attrs:{\"to\":(\"/reglament/\" + _vm.taskId + \"/\" + _vm.revisorId + \"/\" + (revision.id))}},[_vm._v(\"Перейти\")]):_c('div',[_vm._v(\"Решенный\")])],1),_c('b-col',{staticClass:\"text-right small_grey-text\",attrs:{\"cols\":\"3\"}},[_vm._v(\" \"+_vm._s(revision.created_by.last_name ? revision.created_by.last_name : \"\")+\" \"+_vm._s(revision.created_by.first_name ? revision.created_by.first_name[0] + '. ': \"\")+\" \"+_vm._s(revision.created_by.patronymic_name ? revision.created_by.patronymic_name[0] + '.': \"\")+\" \")]),_c('b-col',{staticClass:\"text-right small_grey-text\",attrs:{\"cols\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.moment(revision.created_at).format('DD.MM.YYYY HH:mm'))+\" \")]),_c('b-col',{attrs:{\"cols\":\"8\"}},[_c('b-collapse',{attrs:{\"id\":(\"collapse-\" + (revision.id))}},[_c('b-card',{staticClass:\"mt-4 mb-2\"},[_vm._v(_vm._s(revision.report))])],1)],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-container class=\"pt-4\">\n      <div class=\"large-title mt-5\">Комментарии от {{ revisions.length ? revisions[0].created_by.department.name : '' }}</div>\n\n      <!-- <div class=\"mt-5\"><button class=\"custom-edit\">Отправить на согласование</button></div> -->\n    </b-container>\n\n    <div class=\"md-text mt-5 pt-5\">\n      <b-container>\n        <b-row v-for=\"revision in revisions\" :key=\"revision.id\" class=\"w-100 task-item\" align-v=\"center\">\n          <b-col cols=\"5\" class=\"justify-content-between d-flex align-items-center\">\n            <div class=\"clearitem d-flex align-items-center\" v-b-toggle=\"`collapse-${revision.id}`\">\n              <div  class=\"dot-wrapper mr-3 pl-1 pt-1\"> <div :class=\"{'bg-grey': revision.is_marked_solved}\" class=\"large-dot\"></div> </div>\n              <div :class=\"{'text-grey': revision.is_marked_solved}\"  class=\"text-blue ml-3\">Комментарий от {{revision.created_by.department.name}}</div>\n            </div>\n            <b-icon class=\"float-right text-blue\" icon=\"chevron-down\"></b-icon>\n          </b-col>\n          <b-col cols=\"2\" class=\"text-right small_grey-text\">\n            <router-link v-if=\"!revision.is_marked_solved\" :to=\"`/reglament/${taskId}/${revisorId}/${revision.id}`\">Перейти</router-link>\n            <div v-else>Решенный</div>\n          </b-col>\n          <b-col cols=\"3\" class=\"text-right small_grey-text\">\n            {{revision.created_by.last_name ? revision.created_by.last_name  : \"\"}}\n            {{revision.created_by.first_name ? revision.created_by.first_name[0] + '. ': \"\"}}\n            {{revision.created_by.patronymic_name ? revision.created_by.patronymic_name[0] + '.': \"\"}}\n          </b-col>\n          <b-col cols=\"2\" class=\"text-right small_grey-text\">\n            {{moment(revision.created_at).format('DD.MM.YYYY HH:mm')}}\n          </b-col>\n          <b-col cols=\"8\">\n              <b-collapse  :id=\"`collapse-${revision.id}`\">\n                <b-card class=\"mt-4 mb-2\">{{revision.report}}</b-card>\n              </b-collapse>\n          </b-col>\n        </b-row>\n      </b-container>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mainService from '../sevices/mainService'\nimport { mapGetters } from 'vuex'\nimport moment from 'moment';\n\nexport default {\n  name: 'Revisions',\n  components: {\n  },\n  props: {\n    taskId: {\n      required: true,\n      type: String\n    },\n    revisorId: {\n      required: true,\n      type: String\n    },\n  },\n  data: () => ({\n    reglament: {},\n    revisions: [],\n    moment\n  }),\n  created() {\n    this.getReglament();\n    this.getRevisionsByUser();\n  },\n  computed: {\n    ...mapGetters([\n      'currentUser',\n    ])\n  },\n  methods: {\n    hasIssue(user) {\n      console.log(user)\n      return this.revisions.some(revision => {\n        return !revision.is_marked_solved && revision.created_by.username === user.username;\n      })\n    },\n    gotoIssue(department) {\n      console.log(department)\n      // if (this.hasIssue(department)) {\n      //   this.$router.push(`/revisions/${this.reglament.id}/${department.user.id}`);\n      // }\n    },\n    getReglament() {\n      mainService.getReglament(this.taskId)\n        .then(({data}) => {\n          this.reglament = data[0];\n        })\n    },\n    getRevisionsByUser() {\n      mainService.getRevisionsByUser(this.taskId, this.revisorId)\n        .then(({data}) => {\n          this.revisions = data.results;\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .bg-grey {\n    background: #aaa !important;\n  }\n  .text-grey {\n    color: #aaa !important;\n  }\n  .issue-alert{\n    position: relative;\n    &::after{\n      content: \"\";\n      display: inline-block;\n      width: 10px;\n      height: 10px;\n      background: red;\n      border-radius: 50%;\n      position: absolute;\n      right: -2px;\n      top: -2px;\n    }\n\n  }\n\n  .task-item{\n    min-height: 68px;\n    border-bottom: 1px solid #D9D9DE;\n  }\n  .custom-edit{\n    margin-top: -40px;\n  }\n  .clearitem{\n    border: none !important;\n    outline: none !important;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Revisions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Revisions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Revisions.vue?vue&type=template&id=78d1a9c1&scoped=true&\"\nimport script from \"./Revisions.vue?vue&type=script&lang=js&\"\nexport * from \"./Revisions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Revisions.vue?vue&type=style&index=0&id=78d1a9c1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78d1a9c1\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}